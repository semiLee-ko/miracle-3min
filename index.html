<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>3ë¶„ì˜ ê¸°ì  - ë°°ë‹¬ ì°¸ê¸° í”„ë¡œì íŠ¸</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Polyfill for global (required by some native modules)
        window.global = window;

        // Polyfill for Granite Native Emitter (Fix for AdMob return crash)
        // This prevents the "undefined is not an object" error when the native bridge is missing or delayed.
        if (!window.__GRANITE_NATIVE_EMITTER) {
            window.__GRANITE_NATIVE_EMITTER = {
                emit: function (event, data) {
                    console.log('[Polyfill] __GRANITE_NATIVE_EMITTER.emit:', event, data);
                }
            };
        }

        // Global Error Handler
        window.onerror = function (msg, url, line, col, error) {
            alert("Error: " + msg + "\nurl: " + url + "\nline: " + line);
            return false;
        };

        tailwind.config = {
            theme: {
                extend: {
                    screens: {
                        'wide-view': { 'raw': '(min-aspect-ratio: 13/10)' }
                    },
                    spacing: {
                        'safe-top': 'env(safe-area-inset-top)',
                        'safe-bottom': 'env(safe-area-inset-bottom)',
                        'safe-left': 'env(safe-area-inset-left)',
                        'safe-right': 'env(safe-area-inset-right)',
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --sat: env(safe-area-inset-top);
            --sab: env(safe-area-inset-bottom);
            --sal: env(safe-area-inset-left);
            --sar: env(safe-area-inset-right);
        }

        body {
            padding-top: var(--sat);
            padding-bottom: var(--sab);
            padding-left: var(--sal);
            padding-right: var(--sar);
        }
    </style>
    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Sans+KR:wght@300;400;700;900&display=swap"
        rel="stylesheet">
    <!-- Local Styles -->
    <link rel="stylesheet" href="src/styles.css">

    <!-- Main Script -->
    <script type="module" src="src/main.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>

    <!-- Mobile App Container -->
    <div id="app-frame" class="text-white relative">


        <!-- Animated Background Particles -->
        <div class="bg-particles">
            <div class="particle"
                style="left: 10%; width: 15px; height: 15px; animation-duration: 7s; animation-delay: 0s;">
            </div>
            <div class="particle"
                style="left: 30%; width: 20px; height: 20px; animation-duration: 9s; animation-delay: 2s;">
            </div>
            <div class="particle"
                style="left: 50%; width: 10px; height: 10px; animation-duration: 6s; animation-delay: 4s;">
            </div>
            <div class="particle"
                style="left: 70%; width: 18px; height: 18px; animation-duration: 11s; animation-delay: 1s;">
            </div>
            <div class="particle"
                style="left: 90%; width: 12px; height: 12px; animation-duration: 8s; animation-delay: 3s;">
            </div>
            <div class="particle"
                style="left: 20%; width: 8px; height: 8px; animation-duration: 10s; animation-delay: 5s;"></div>
            <div class="particle"
                style="left: 60%; width: 14px; height: 14px; animation-duration: 7.5s; animation-delay: 2.5s;">
            </div>
        </div>

        <!-- HEADER -->
        <header class="absolute top-0 w-full p-6 flex justify-between items-start z-50 text-white pointer-events-none">
            <div class="flex items-center gap-2 mt-1 pointer-events-auto">
                <span class="font-black text-xl tracking-tighter text-white drop-shadow-md italic">
                    ì¹¨ì°©í•´<span class="text-yellow-300">3ë¶„</span>
                </span>
                <!-- Help Button -->
                <button id="btn-help" class="ml-2 text-white/50 hover:text-white transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </button>
            </div>
            <div class="flex flex-col items-end min-w-[140px]">
                <div class="text-[10px] opacity-80 mb-1 font-bold mr-[10px]">ì´ë²ˆë‹¬ ë‹¹ì‹ ì˜ ì¸ë‚´ë¡œ</div>
                <div
                    class="bg-white/20 backdrop-blur-md rounded-full px-3 py-1 text-xs font-bold border border-white/30 flex items-center gap-2 whitespace-nowrap">
                    <span class="bg-yellow-400 rounded-full w-2 h-2"></span>
                    <span id="total-savings-display">0</span>ì› ì„¸ì´ë¸Œ
                </div>
            </div>
        </header>

        <!-- 1. INTRO SECTION -->
        <section id="intro-screen"
            class="w-full h-full relative z-20 flex flex-col wide-view:flex-row items-center justify-center p-8 transition-opacity duration-1000">

            <!-- Left Half (Landscape): Character + Start Button -->
            <div
                class="w-full wide-view:w-1/2 flex flex-col items-center justify-center wide-view:h-full wide-view:relative">
                <!-- Character Animation -->
                <div class="character-container mb-12 wide-view:mb-0 relative">
                    <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="100" cy="100" r="90" fill="white" fill-opacity="0.1" />
                        <path class="char-body"
                            d="M43.6,-57.3C55.3,-46.2,62.8,-30.9,64.8,-15.2C66.8,0.5,63.3,16.6,53.8,29.1C44.3,41.6,28.8,50.5,12.7,53.8C-3.4,57.1,-20.1,54.8,-34.7,46.1C-49.3,37.4,-61.8,22.3,-64.5,5.6C-67.2,-11.1,-60.1,-29.4,-47.5,-41.2C-34.9,-53,-16.8,-58.3,-0.2,-58C16.4,-57.8,31.9,-68.4,43.6,-57.3Z"
                            transform="translate(100 100) scale(1.1)" />
                        <circle class="char-eye" cx="75" cy="90" r="5" style="transform-origin: 75px 90px" />
                        <circle class="char-eye" cx="125" cy="90" r="5" style="transform-origin: 125px 90px" />
                        <ellipse class="char-blush" cx="65" cy="110" rx="6" ry="3" />
                        <ellipse class="char-blush" cx="135" cy="110" rx="6" ry="3" />
                        <path class="char-mouth" d="M85 110 Q100 125 115 110" stroke-linecap="round" fill="none" />
                    </svg>
                </div>

                <!-- Start Button: Absolute in Portrait / Landscape Absolute Bottom -->
                <button id="start-btn"
                    class="absolute bottom-12 left-1/2 -translate-x-1/2 w-[85%] max-w-xs btn-pop text-lg shadow-[0_8px_0_#E5BC2E] active:shadow-none translate-y-0 active:translate-y-2 transition-opacity opacity-0 wide-view:absolute wide-view:bottom-0 wide-view:h-[3rem] wide-view:flex wide-view:items-center wide-view:justify-center"
                    style="touch-action: manipulation;">
                    ë”± 3ë¶„ë§Œ ì°¸ê¸° ì‹œì‘
                </button>
            </div>

            <!-- Right Half (Landscape): Quote -->
            <div class="w-full wide-view:w-1/2 flex flex-col items-center justify-center wide-view:h-full">
                <!-- Emotional Quote Area -->
                <div class="text-center w-full max-w-xs flex flex-col items-center">
                    <div
                        class="inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-br from-white/20 to-white/5 border border-white/20 shadow-lg backdrop-blur-sm mb-6">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-300 drop-shadow" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                        </svg>
                        <span class="text-xs font-bold text-white">ì˜¤ëŠ˜ì˜ íŒ©íŠ¸</span>
                    </div>

                    <h1 id="quote-text"
                        class="text-[clamp(1.1rem,4.5vw,1.5rem)] font-bold leading-relaxed text-white mb-2 drop-shadow-lg opacity-0 break-keep transition-all duration-300">
                        ì˜¤ëŠ˜ ë¨¹ì„ ì¹˜í‚¨ì„ ë‚´ì¼ë¡œ ë¯¸ë£¨ë©´,<br>í†µì¥ ì”ê³ ê°€ ì›ƒëŠ”ë‹¤.
                    </h1>
                </div>
            </div>

        </section>

        <!-- 2. MAIN TIMER SCREEN -->
        <section id="main-screen"
            class="hidden w-full h-full relative z-20 flex flex-col wide-view:flex-row wide-view:items-center wide-view:justify-center pt-16 wide-view:pt-0 wide-view:p-8 wide-view:gap-8">

            <div
                class="flex-1 flex flex-col items-center justify-center min-h-0 relative w-full wide-view:w-1/2 wide-view:h-full wide-view:pt-12">
                <div class="character-container scale-110 wide-view:scale-90 wide-view:mb-2">
                    <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <radialGradient id="pale-gradient" cx="50%" cy="40%" r="60%" fx="50%" fy="40%">
                                <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:0.6" />
                                <stop offset="100%" style="stop-color:#3B82F6;stop-opacity:0" />
                            </radialGradient>
                        </defs>
                        <!-- Body -->
                        <path class="char-body" id="main-blob-body"
                            d="M38.1,-53.4C49.9,-44.2,60.4,-34.3,64.9,-22.3C69.4,-10.3,67.9,3.9,61.9,15.8C55.9,27.7,45.4,37.3,34.2,46.1C23,54.9,11.1,62.9,-1.9,65.5C-14.9,68.1,-27,65.3,-37.2,57.7C-47.4,50.1,-55.7,37.7,-60.7,24.3C-65.7,10.9,-67.4,-3.5,-61.8,-15.8C-56.2,-28.1,-43.3,-38.3,-30.4,-47C-17.5,-55.7,-4.6,-62.9,6.2,-71.4C17,-79.9,26.3,-62.6,38.1,-53.4Z"
                            transform="translate(100 100)" />

                        <!-- Pale Effect (Initially Hidden) -->
                        <ellipse id="pale-effect" class="char-pale-effect" cx="100" cy="50" rx="60" ry="40"
                            opacity="0" />

                        <!-- Face -->
                        <g id="main-blob-face">
                            <circle class="char-eye" cx="80" cy="90" r="6" style="transform-origin: 80px 90px" />
                            <circle class="char-eye" cx="120" cy="90" r="6" style="transform-origin: 120px 90px" />
                            <path id="sweat-drop" fill="#A5F3FC"
                                d="M135 70 Q135 60 140 70 Q145 80 135 80 Q125 80 130 70" opacity="0" />
                            <path class="char-mouth" d="M90 115 L110 115" />
                        </g>
                    </svg>
                </div>
                <div class="text-white text-center mt-[-10px] wide-view:mt-[-20px] relative z-10 mb-4 wide-view:w-full">
                    <div id="status-message" class="text-sm opacity-80 font-bold tracking-widest mb-1 min-h-[1.25rem]">
                        ê´œì°®ì•„ìš”. ë°°ë‹¬ì•± ì•„ì§ ì•ˆ ëˆŒë €ì–´ìš”.</div>
                    <div id="timer-display" class="text-5xl font-black drop-shadow-lg tracking-tighter">03:00
                    </div>
                    <div class="mt-4 wide-view:mt-0 flex flex-col items-center">
                        <label for="savings-input" class="text-xs font-bold opacity-70 mb-1">ì ˆì•½í•  ë°°ë‹¬ë¹„</label>
                        <div class="relative">
                            <input type="text" id="savings-input" value="25,000" inputmode="numeric"
                                class="bg-white/20 backdrop-blur-md rounded-2xl py-2 pr-4 text-right text-[1.3rem] font-black text-white w-40 outline-none border border-white/30 focus:bg-white/30 transition-all placeholder-white/50">
                            <span
                                class="absolute left-3 top-1/2 -translate-y-1/2 text-xl font-bold opacity-80 pointer-events-none">â‚©</span>
                        </div>
                    </div>
                </div>
            </div>

            <div
                class="main-card flex-none animate-[slideUp_0.5s_ease-out] wide-view:w-[40%] wide-view:h-auto wide-view:min-h-[auto] wide-view:self-center wide-view:mt-24 wide-view:mb-0 wide-view:p-3 wide-view:rounded-[2rem] wide-view:flex wide-view:flex-col wide-view:justify-center wide-view:shadow-2xl">

                <h3 class="title-pop text-lg mb-2 text-left px-2 wide-view:mb-1 wide-view:text-sm">
                    ìœ„ê¸°
                    íƒˆì¶œ ë„êµ¬</h3>
                <div class="grid grid-cols-2 gap-2 mb-3 wide-view:gap-2 wide-view:mb-1">
                    <!-- Blue Glasses -->
                    <button id="btn-blue" class="btn-secondary btn-blue group wide-view:justify-center">
                        <div class="icon-box wide-view:!hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M2 10s3-3 8-3 8 3 8 3v4s-3 3-8 3-8-3-8-3v-4zm3 2h2m8 0h2" />
                                <circle cx="6" cy="12" r="2" class="opacity-30" />
                                <circle cx="18" cy="12" r="2" class="opacity-30" />
                            </svg>
                        </div>
                        <span class="text-sm font-bold">ì‹ìš• ê°í‡´</span>
                    </button>

                    <button id="btn-game" class="btn-secondary btn-green group wide-view:justify-center">
                        <div class="icon-box wide-view:!hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z" />
                                <circle cx="9" cy="9" r="1" fill="currentColor" class="text-green-600" />
                                <rect x="13" y="8" width="4" height="2" rx="1" fill="currentColor"
                                    class="text-green-600" />
                            </svg>
                        </div>
                        <span class="text-sm font-bold">ë© ë•Œë¦¬ê¸°</span>
                    </button>

                    <button id="btn-labor" class="btn-secondary btn-yellow group wide-view:justify-center">
                        <div class="icon-box wide-view:!hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <span class="text-sm font-bold">ê¸ˆìœµ ì¹˜ë£Œ</span>
                    </button>

                    <button id="btn-breathe" class="btn-secondary btn-purple group wide-view:justify-center">
                        <div class="icon-box wide-view:!hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <span class="text-sm font-bold">ì‹¬í˜¸í¡</span>
                    </button>
                </div>

            </div>
        </section>

        <!-- 3. TOOLS & GAMES (Overlays) -->

        <!-- Blue Filter Modal -->
        <div id="blue-modal"
            class="hidden absolute inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-[fadeIn_0.2s_ease-out] pt-safe-top">
            <div class="bg-white rounded-[2rem] w-full max-w-sm shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
                <div class="px-5 py-4 flex justify-between items-center bg-white shrink-0">
                    <h2 class="font-black text-xl text-gray-800 tracking-tight">ì‹ìš• ê°í‡´</h2>
                    <button
                        class="btn-close-tool w-7 h-7 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 flex items-center justify-center transition-colors"
                        data-tool="blue">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                <div class="p-5 pt-0 overflow-y-auto hidden-scrollbar">
                    <div
                        class="w-full aspect-square bg-gray-100 rounded-2xl mb-5 overflow-hidden relative shadow-inner group">
                        <img id="food-preview"
                            src="https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                            alt="ìŒì‹ ì‚¬ì§„" class="w-full h-full object-cover transition-all duration-500">
                        <div
                            class="absolute bottom-4 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded-full font-bold">
                            ì‹ìš• ê°í‡´ ëª¨ë“œ ON
                        </div>
                    </div>

                    <div class="flex gap-3 w-full mb-3 shrink-0">
                        <button id="btn-blue-weak"
                            class="flex-1 bg-blue-50 hover:bg-blue-100 text-blue-500 py-3 rounded-xl font-bold transition-colors text-sm">
                            ë§›ì—†ê²Œ
                        </button>
                        <button id="btn-blue-strong"
                            class="flex-1 bg-blue-100 hover:bg-blue-200 text-blue-600 py-3 rounded-xl font-bold transition-colors text-sm">
                            ë” ë§›ì—†ê²Œ
                        </button>
                    </div>

                    <div class="w-full">
                        <button onclick="appLogic.triggerAlbum()"
                            class="w-full bg-gray-900 text-white py-4 rounded-xl font-bold text-center cursor-pointer hover:bg-gray-800 transition-colors shadow-lg active:scale-[0.98] flex items-center justify-center gap-2">
                            <span>ìŒì‹ì‚¬ì§„ ê°€ì ¸ì˜¤ê¸°</span>
                        </button>
                        <input type="file" id="image-upload" accept="image/*" class="hidden">
                    </div>
                </div>
            </div>
        </div>

        <!-- Chill Tool Modal -->
        <div id="game-modal"
            class="hidden absolute inset-0 z-50 bg-[#5B4DFF] flex flex-col animate-[slideUp_0.3s_ease-out] pt-9 safe-area-padding">
            <div class="p-4 flex justify-between items-center shrink-0 z-9">
                <div class="flex flex-col items-start px-1">
                    <h2 class="font-black text-xl text-white tracking-tight leading-none mb-2">ë©ë•Œë¦¬ê¸°</h2>
                    <p class="text-white/70 text-xs font-bold">3ë¶„ë§Œ... ì•„ë¬´ ìƒê° ì—†ì´ ì‰¬ì„¸ìš”.</p>
                </div>
                <button
                    class="btn-close-tool w-12 h-12 rounded-full bg-white/20 hover:bg-white/30 text-white flex items-center justify-center transition-colors shrink-0 backdrop-blur-sm"
                    onclick="appLogic.closeTool('game')">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <div class="flex-1 relative min-h-0 bg-white m-5 mt-0 rounded-3xl overflow-hidden shadow-2xl border-4 border-white/10"
                id="game-area">
                <!-- Module Mount Point -->
                <div id="chill-container" class="w-full h-full relative bg-black"></div>
            </div>
        </div>

        <!-- Labor Calculator Modal -->
        <div id="labor-modal" role="dialog" aria-modal="true" aria-labelledby="labor-title"
            class="hidden absolute inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-[fadeIn_0.2s_ease-out] pt-safe-top">
            <div class="bg-white rounded-[2rem] w-full max-w-sm shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
                <div class="px-5 py-4 flex justify-between items-center bg-white shrink-0">
                    <h2 id="labor-title" class="font-black text-xl text-gray-800 tracking-tight">ê¸ˆìœµ ì¹˜ë£Œ</h2>
                    <button
                        class="btn-close-tool w-7 h-7 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 flex items-center justify-center transition-colors"
                        data-tool="labor">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                <div class="p-6 space-y-4 overflow-y-auto">
                    <!-- Top Section: Split Layout -->
                    <div class="grid grid-cols-2 gap-3 h-24">
                        <!-- Left: Expense Roller -->
                        <div id="expense-roller"
                            class="relative h-full overflow-hidden bg-gray-50 rounded-2xl border border-gray-100 flex items-center justify-center p-2 text-center">
                            <div id="roller-content"
                                class="text-xs font-bold text-gray-600 transition-transform duration-500 ease-in-out transform translate-y-0 break-keep leading-tight">
                                <!-- Dynamic Content -->
                            </div>
                        </div>

                        <!-- Right: Wage Input -->
                        <div
                            class="bg-yellow-50 p-3 rounded-2xl border border-yellow-100 flex flex-col justify-center h-full">
                            <label class="font-bold text-[10px] text-yellow-600 mb-1 block">ë‚´ ì‹œê¸‰ (ì›)</label>
                            <input type="text" id="hourly-wage" value="9,860" inputmode="numeric"
                                class="w-full bg-transparent font-black text-xl text-gray-800 outline-none placeholder-gray-300 text-right p-0">
                        </div>
                    </div>

                    <!-- Bottom Section: Labor Result (Always Visible) -->
                    <div id="labor-result" class="pt-2 text-center pb-2">
                        <p class="text-gray-400 text-xs font-bold mb-1">ì‚¬ì¥ë‹˜ ëˆˆì¹˜ ë³´ë©´ì„œ</p>
                        <div class="text-4xl font-black text-[#5B4DFF] leading-none mb-1">
                            <span id="labor-hours">0</span><span class="text-2xl ml-1">ì‹œê°„</span>
                            <span id="labor-minutes">0</span><span class="text-2xl ml-1">ë¶„</span>
                        </div>
                        <p class="text-gray-400 text-[10px]">ë™ì•ˆ ë” ì¼í•´ì•¼ í•´ìš”.</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Breathing Modal -->
        <div id="breathe-modal" role="dialog" aria-modal="true" aria-labelledby="breathe-title"
            class="hidden absolute inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-[fadeIn_0.2s_ease-out] pt-safe-top">
            <div
                class="bg-white rounded-[2rem] w-full max-w-sm shadow-2xl overflow-hidden flex flex-col relative max-h-[90vh]">
                <div class="px-5 py-4 flex justify-between items-center bg-white shrink-0 z-10">
                    <h2 id="breathe-title" class="font-black text-xl text-[#5B4DFF] tracking-tight">ì‹¬í˜¸í¡</h2>
                    <button
                        class="btn-close-tool w-7 h-7 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 flex items-center justify-center transition-colors"
                        data-tool="breathe">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                <div class="p-10 flex flex-col items-center justify-start flex-1 min-h-0 overflow-y-auto">
                    <div class="relative flex items-center justify-center mb-8 shrink-0">
                        <div
                            class="w-40 h-40 bg-[#5B4DFF]/10 rounded-full flex items-center justify-center shadow-inner animate-breathe z-10">
                            <div class="w-full h-full rounded-full bg-[#5B4DFF]/30 flex items-center justify-center shadow-lg text-[#5B4DFF] font-black text-xl transition-all duration-500"
                                id="breath-text">ì¤€ë¹„í•´ìš”</div>
                        </div>
                        <div
                            class="absolute w-[11rem] h-[11rem] border-2 border-[#5B4DFF]/20 rounded-full animate-[spin_10s_linear_infinite] z-0">
                        </div>
                    </div>

                    <div class="text-center w-full relative z-10 pb-4">
                        <p class="text-[#5B4DFF] font-bold opacity-80 mb-3 text-sm tracking-wider uppercase">
                            4-7-8 í˜¸í¡ë²•
                        </p>
                        <div class="bg-[#5B4DFF]/5 p-4 rounded-xl text-xs text-gray-600 leading-relaxed break-keep">
                            ì¶©ë™ì´ ëŠê»´ì§ˆ ë•Œ ë”± 5ë²ˆë§Œ ë°˜ë³µí•´ë³´ì„¸ìš”.<br>
                            <span class="text-[#5B4DFF] font-bold">4ì´ˆ</span> ë“¤ì´ë§ˆì‹œê³ , <span
                                class="text-[#5B4DFF] font-bold">7ì´ˆ</span> ë©ˆì¶”ê³ , <span
                                class="text-[#5B4DFF] font-bold">8ì´ˆ</span> ë‚´ë±‰ì–´ìš”.
                        </div>
                    </div>
                </div>
            </div>
        </div><!-- 4. RESULT SECTION -->

        <!-- Help Modal -->
        <div id="help-modal"
            class="hidden absolute inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-6 animate-[fadeIn_0.2s_ease-out] pt-safe-top">
            <div
                class="bg-white rounded-[2rem] w-full max-w-sm shadow-2xl overflow-hidden flex flex-col p-6 text-left max-h-[85vh] overflow-y-auto">
                <h3 class="text-gray-900 font-black text-xl mb-4 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#5B4DFF]" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    ì¹¨ì°©í•´ 3ë¶„ ì‚¬ìš©ë²•
                </h3>
                <div class="space-y-4 text-sm text-gray-600 leading-relaxed font-medium">
                    <div class="bg-gray-50 p-4 rounded-xl">
                        <p class="font-bold text-gray-800 mb-1">â±ï¸ ë”± 3ë¶„ë§Œ ì°¸ì•„ë³´ì„¸ìš”!</p>
                        <p>ë°°ë‹¬ ìŒì‹ì„ ì£¼ë¬¸í•˜ê³  ì‹¶ì€ ì¶©ë™ì€ ë³´í†µ 3ë¶„ë§Œ ì°¸ìœ¼ë©´ ì‚¬ë¼ì ¸ìš”. íƒ€ì´ë¨¸ê°€ ëë‚  ë•Œê¹Œì§€ ë‹¤ì–‘í•œ ë„êµ¬ë¡œ ìœ„ê¸°ë¥¼ ë„˜ê²¨ë³´ì„¸ìš”.</p>
                    </div>

                    <div class="space-y-2">
                        <p class="font-bold text-gray-800">ğŸ› ï¸ ìœ„ê¸° íƒˆì¶œ ë„êµ¬</p>
                        <ul class="list-disc pl-4 space-y-1 text-xs">
                            <li><span class="text-[#5B4DFF] font-bold">ì‹ìš• ê°í‡´</span>: ì…ë§› ëš ë–¨ì–´ì§€ëŠ” íŒŒë€ í•„í„°</li>
                            <li><span class="text-green-600 font-bold">ë© ë•Œë¦¬ê¸°</span>: ì•„ë¬´ ìƒê° ì—†ì´ ì‹œê°„ ë–¼ìš°ê¸°</li>
                            <li><span class="text-orange-500 font-bold">ê¸ˆìœµ ì¹˜ë£Œ</span>: ë‚´ ì‹œê¸‰ ëŒ€ë¹„ ì£¼ë¬¸ê¸ˆì•¡ ë¹„êµ</li>
                            <li><span class="text-purple-600 font-bold">ì‹¬í˜¸í¡</span>: 4-7-8 í˜¸í¡ë²•ìœ¼ë¡œ ì§„ì •í•˜ê¸°</li>
                        </ul>
                    </div>

                    <div class="bg-blue-50 p-3 rounded-xl text-blue-800 text-xs">
                        ğŸ’¡ <b>Tip:</b> í•˜ë£¨ 5ë²ˆ ì„±ê³µ ê¸°ë¡ ì œí•œì´ ìˆì–´ë„, ë³´ìƒí˜• ê´‘ê³ ë¥¼ ì‹œì²­í•˜ê³  ê³„ì† ê¸°ë¡í•  ìˆ˜ ìˆì–´ìš”!
                    </div>

                    <!-- ì•ˆë‚´ ì‚¬í•­ -->
                    <div class="mt-4 border-t border-gray-100 pt-3">
                        <p class="font-bold text-gray-600 text-[13px] mb-1">ğŸ“¢ ì°¸ê³ ì‚¬í•­</p>
                        <ul class="list-disc pl-3 space-y-1 text-[12px] text-gray-400 leading-snug">
                            <li>ì„¤ì •í•œ ì ˆì•½ ê¸ˆì•¡ ì´ì™¸ì˜ ìœ„ê¸°íƒˆì¶œ ë„êµ¬ ê´€ë ¨ ì´ìš© ë°ì´í„°ëŠ” ìˆ˜ì§‘í•˜ì§€ ì•Šì•„ìš”.</li>
                            <li>1ê°œì›”ì´ ì§€ë‚œ ê¸°ë¡ ë°ì´í„°ëŠ” 'ì¹¨ì°©í•´3ë¶„'ì—ì„œ ìë™ìœ¼ë¡œ ì‚­ì œí•´ìš”.</li>
                        </ul>
                    </div>

                    <!-- Copyright -->
                    <div class="text-[10px] text-center text-gray-300 mt-4 font-light">
                        Copyright Â© 2025 CODA Creative. All rights reserved.
                    </div>
                </div>


                <button id="btn-close-help"
                    class="mt-2 bg-gray-900 text-white py-3 rounded-xl font-bold shadow-lg active:scale-[0.98] transition-transform w-full shrink-0">
                    ë‹«ê¸°
                </button>
            </div>
        </div>

        <!-- Generic Alert Modal -->
        <div id="alert-modal" role="dialog" aria-modal="true" aria-labelledby="alert-title"
            class="hidden absolute inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-[fadeIn_0.2s_ease-out] pt-safe-top">
            <div
                class="bg-white rounded-[2rem] w-full max-w-xs shadow-2xl overflow-hidden flex flex-col p-6 text-center max-h-[85vh] overflow-y-auto">
                <h3 id="alert-title" class="text-gray-800 font-bold text-lg mb-2">ì ê¹ë§Œìš”!</h3>
                <p id="alert-message" class="text-gray-600 text-sm mb-6 break-keep leading-relaxed"></p>
                <button id="btn-close-alert"
                    class="bg-[#5B4DFF] text-white py-3 rounded-xl font-bold shadow-lg active:scale-[0.98] transition-transform w-full shrink-0">
                    í™•ì¸
                </button>
            </div>
        </div>

        <!-- Generic Confirm Modal -->
        <div id="confirm-modal" role="dialog" aria-modal="true" aria-labelledby="confirm-title"
            class="hidden absolute inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-[fadeIn_0.2s_ease-out]">
            <div
                class="bg-white rounded-[2rem] w-full max-w-xs shadow-2xl overflow-hidden flex flex-col p-6 text-center max-h-[85vh] overflow-y-auto">
                <h3 id="confirm-title" class="text-gray-800 font-bold text-lg mb-2">ì •ë§ ê·¸ë§Œí• ê¹Œìš”?</h3>
                <p id="confirm-message" class="text-gray-600 text-sm mb-6 break-keep leading-relaxed"></p>
                <div class="flex gap-3 shrink-0">
                    <button id="btn-cancel-confirm"
                        class="flex-1 bg-gray-100 text-gray-500 py-3 rounded-xl font-bold active:scale-[0.98] transition-transform">
                        ë©”ì¸ìœ¼ë¡œ
                    </button>
                    <button id="btn-ok-confirm"
                        class="flex-1 bg-red-500 text-white py-3 rounded-xl font-bold shadow-lg active:scale-[0.98] transition-transform">
                        ê¸°ë¡í• ë˜ìš”
                    </button>
                </div>
            </div>
        </div>

        <section id="result-screen"
            class="hidden w-full h-full relative z-20 flex flex-col bg-[#5B4DFF] items-center pt-20 wide-view:pt-0 text-white text-center wide-view:flex-row wide-view:justify-center wide-view:items-center wide-view:gap-2">
            <div
                class="flex-1 flex flex-col items-center justify-center min-h-0 h-1/2 wide-view:w-[35%] wide-view:flex-none wide-view:h-full wide-view:pt-20">
                <!-- Daily Count Display -->
                <div id="today-count-display"
                    class="font-bold text-sm bg-white/20 backdrop-blur-md px-4 py-1.5 rounded-full mb-4 animate-bounce border border-white/30 shadow-lg">
                    ì˜¤ëŠ˜ ì°¸ì€ íšŸìˆ˜ : <span class="text-yellow-300">0</span>/5íšŒ
                </div>

                <!-- Floating Happy Character -->
                <div
                    class="character-container mb-4 scale-125 wide-view:scale-100 shrink-0 relative h-[40%] aspect-square w-auto min-h-0 max-h-[180px]">
                    <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" class="w-full h-full block">
                        <!-- Halo -->
                        <circle cx="100" cy="100" r="90" fill="white" fill-opacity="0.2" />
                        <!-- Body -->
                        <path class="char-body"
                            d="M43.6,-57.3C55.3,-46.2,62.8,-30.9,64.8,-15.2C66.8,0.5,63.3,16.6,53.8,29.1C44.3,41.6,28.8,50.5,12.7,53.8C-3.4,57.1,-20.1,54.8,-34.7,46.1C-49.3,37.4,-61.8,22.3,-64.5,5.6C-67.2,-11.1,-60.1,-29.4,-47.5,-41.2C-34.9,-53,-16.8,-58.3,-0.2,-58C16.4,-57.8,31.9,-68.4,43.6,-57.3Z"
                            transform="translate(100 100) scale(1.1)" />
                        <!-- Normal Eyes -->
                        <circle class="char-eye" cx="75" cy="90" r="5" style="transform-origin: 75px 90px" />
                        <circle class="char-eye" cx="125" cy="90" r="5" style="transform-origin: 125px 90px" />
                        <!-- Blush -->
                        <ellipse class="char-blush" cx="60" cy="110" rx="7" ry="4" />
                        <ellipse class="char-blush" cx="140" cy="110" rx="7" ry="4" />
                        <!-- Gentle Smile (Same as Intro) -->
                        <path class="char-mouth" d="M85 110 Q100 125 115 110" stroke="#2D2D2D" stroke-width="4"
                            stroke-linecap="round" fill="none" />
                    </svg>
                </div>
                <h1 class="font-black text-3xl mb-2 wide-view:text-2xl shrink-0">ì°¸ê¸° ì„±ê³µ!</h1>
                <p class="opacity-80 text-sm wide-view:text-xs shrink-0">ìœ„ì¥ë„ ì§€ê°‘ë„ ë‹¹ì‹ ì„ ìë‘ìŠ¤ëŸ¬ì›Œí•´ìš”.</p>
            </div>
            <div
                class="main-card h-1/2 w-full pb-6 flex flex-col min-h-0 wide-view:w-[63%] wide-view:pb-0 wide-view:mr-4 wide-view:h-auto wide-view:self-center wide-view:mt-12 wide-view:mb-0 wide-view:max-h-[90vh] wide-view:rounded-[2rem]">
                <div class="flex justify-around mb-4 wide-view:mb-2 shrink-0">
                    <div>
                        <div class="text-gray-400 text-xs font-bold mb-1">ì´ë²ˆì£¼ ì ˆì•½í•œ ëˆ</div>
                        <div class="text-2xl font-black text-green-500">â‚©<span id="result-money">0</span></div>
                    </div>
                    <div>
                        <div class="text-gray-400 text-xs font-bold mb-1">ì´ë²ˆì£¼ ì„±ê³µ íšŸìˆ˜</div>
                        <div class="text-2xl font-black text-orange-500"><span id="success-count-display">0</span><span
                                class="text-sm">íšŒ</span></div>
                    </div>
                </div>
                <div
                    class="bg-gray-50 rounded-2xl p-4 mb-4 relative flex-1 min-h-0 w-full wide-view:h-24 wide-view:mb-2 wide-view:flex-none">
                    <canvas id="savingsChart"></canvas>
                </div>
                <button id="btn-restart"
                    class="btn-pop wide-view:py-3 wide-view:text-base wide-view:mb-2 shrink-0 btn-restart-custom">
                    <span class="text-sm">ê´‘ê³  ë³´ê³ </span><br>
                    <span class="text-base font-bold">ê¸°ë¡ ë‚¨ê¸°ê¸°</span>
                </button>
            </div>
        </section>

    </div>

    <!-- Main Logic (Moved to Head) -->
</body>

</html>